# 쿠키와 세션의 등장

HTTP 통신은 요청-> 응답이 끝나면 stateless(상태가 유지되지 않는)한 특징이 있음
-> 그래서 쿠키와 세션이 등장한 것임.

웹 브라우저(클라이언트)와 서버가 대화를 할 때 서버는 바로 직전의 사용자를 기억 못하기 때문에 저 단점을 보완하고자 등장.

## HTTP의 근본적인 문제: 비연결성, 무상태

### 비연결성(Connectionless)

: 초기 웹(HTTP)은 단순히 정보를 보여주는 문서 전달이 목적이었기 때문에, 효율성을 위해 한 번의 요청과 응답이 끝나면 바로 연결을 끊어버리도록 설계되어 있음.(서버의 자원은 한정되어 있으므로)
-> 문제점: 페이지를 이동할 때마다 서버는 '너 누구야?'라고

### 무상태(Stateless)

: 서버가 클라이언트의 이전 상태를 전혀 기억하지 않음.
-> 문제점: 서버 기억력이 금붕어임.

--> 쿠키, 세션 등장

## 1단계 해결책: 쿠키

: 클라이언트(브라우저)쪽에 정보를 저장하는 방식.

서버가 응답을 작성할 때 저장하려는 정보를 응답 헤더에 set-cookie에 담는다
이후 클라이언트가 재요청하면 저장된 쿠키를 요청 헤더의 cookie에 담아 보낸다

서버가 응답을 보낼 때 "이 꼬리표(데이터)를 가지고 있다가, 다음 요청 때 보여주세요"라고 브라우저에게 줍니다.
-> 출입증 같은 역할

서버는 쿠키에 담긴 정보를 바탕으로 해당 요청의 클라이언트가 누군지 식별 할 수 있다.

-> 단점: 사용자의 컴퓨터에 저장되므로 위변조가 쉽고, 보안에 취약!

## 2단계 해결책: 세션

: 쿠키의 보안 을 해결하기 위해 중요한 정보들은 서버가 직접 관리하는 세션이 등장!

- 중요한 정보는 DB에 둠.
- 사용자에게는 접근할 수 있는 열쇠를 줌
- 그 열쇠는 보통 쿠키에 담아서 주고 받음

지피티 왈: 쿠키는 매번 서버에 나를 증명하기 위한 **'명찰'**이고, 세션은 그 명찰을 확인하고 서버가 열어보는 **'사물함'**이라고 이해하시면 됩니다.

->최근에는 모바일 환경과 서버의 확장성 문제로 인해 세션 대신 토큰(JWT) 기반 인증도 많이 사용

-> 치명적 단점: 확장성(Scalability)때문에.
: 1. 서버가 여러대 일때-> 어떤 요청이 우연히 다른 서버쪽으로 가면 다시 로그인해야하는 등 번거로움이 생김.

: 2. 모바일 앱 환경: 세션은 웹 브라우저의 쿠키를 기반으로 하는데 앱은 쿠키를 다루기가 까다로움

# 토큰

토큰, 그 중 주로 쓰이는 JWT(JSON Web Token)은 세션의 한계를 극복하고 모바일 환경에 맞추기 위해 등장했음

## 세션 vs 토큰

' 사용자 정보를 어디에 두느냐' 차이

세션이 **'사물함 열쇠'**라면, 토큰은 **'위조 방지 도장이 찍힌 여권'**

- 세션: 사용자 정보는 서버(DB)에 있고, 사용자는 ID만 들고 다님.
  -> 확인하려면 서버는 DB를 열어서 저 ID에 해당하는 내용을 찾아봐야함.

-토큰: 사용자 정보를 암호화해서 사용자에게 건네줌. 서버는 아무것도 저장하지 않음
-> 확인하려면, 서버는 토큰의 서명만 확인하여 유효성을 검증

## ㅓㅉㅆ
